<TITLE>A Solution to Fairness in message passing</TITLE>
<BODY BGCOLOR="FFFFFF">
<PRE>
#include "mpi.h"
#include &lt;stdio.h&gt;
int main(argc, argv)
int argc;
char **argv;
{
    int rank, size, i, buf[1];
    MPI_Status status;

    <A href="http://www.mcs.anl.gov/mpi/www/www3/MPI_Init.html#MPI_Init">MPI_Init</A>( &amp;argc, &amp;argv );
    <A href="http://www.mcs.anl.gov/mpi/www/www3/MPI_Comm_rank.html#MPI_Comm_rank">MPI_Comm_rank</A>( MPI_COMM_WORLD, &amp;rank );
    <A href="http://www.mcs.anl.gov/mpi/www/www3/MPI_Comm_size.html#MPI_Comm_size">MPI_Comm_size</A>( MPI_COMM_WORLD, &amp;size );
    if (rank == 0) {
	for (i=0; i&lt;100*(size-1); i++) {
	    <A href="http://www.mcs.anl.gov/mpi/www/www3/MPI_Recv.html#MPI_Recv">MPI_Recv</A>( buf, 1, MPI_INT, MPI_ANY_SOURCE, 
		      MPI_ANY_TAG, MPI_COMM_WORLD, &amp;status );
	    printf( "Msg from %d with tag %d\n", 
		    status.MPI_SOURCE, status.MPI_TAG );
	}
    }
    else {
	for (i=0; i&lt;100; i++) 
	    <A href="http://www.mcs.anl.gov/mpi/www/www3/MPI_Send.html#MPI_Send">MPI_Send</A>( buf, 1, MPI_INT, 0, i, MPI_COMM_WORLD );
    }
    <A href="http://www.mcs.anl.gov/mpi/www/www3/MPI_Finalize.html#MPI_Finalize">MPI_Finalize</A>();
    return 0;
}
</PRE>
</BODY>
